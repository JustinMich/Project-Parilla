name: CI/CD — Deploy to Netlify

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      # 1. Checkout repo
      - name: Checkout Repository
        uses: actions/checkout@v4

      # 2. Setup Node (optional for plain HTML/JS, but needed if you use npm tools)
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'

      # 3. Install dependencies (skip if none)
      - name: Install Dependencies
        run: npm install || echo "No dependencies to install"

      # 4. Build step (skip if plain HTML/JS doesn't require build)
      - name: Build Project
        run: echo "No build needed for plain HTML/JS"

      # 5. Deploy to Netlify
      - name: Deploy to Netlify
        uses: nwtgck/actions-netlify@v3
        with:
          publish-dir: "Bag o folder"   # ← your output folder
          production-deploy: true
          NETLIFY_SITE_ID: ${{ secrets.NETLIFY_SITE_ID }}
          NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }}
